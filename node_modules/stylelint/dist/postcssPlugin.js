"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _createStylelint = require("./createStylelint");

var _createStylelint2 = _interopRequireDefault(_createStylelint);

var _postcss = require("postcss");

var _postcss2 = _interopRequireDefault(_postcss);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _postcss2.default.plugin("stylelint", function () {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var tailoredOptions = options.rules ? { config: options } : options;

  var stylelint = (0, _createStylelint2.default)(tailoredOptions);
  return function (root, result) {
    return stylelint._lintSource({
      filePath: options.from || _lodash2.default.get(root, "source.input.file"),
      existingPostcssResult: result
    });
  };
});